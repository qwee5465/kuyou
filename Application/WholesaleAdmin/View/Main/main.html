<!DOCTYPE html>
<html>
<head>
	<title></title>
	<script type="text/javascript" src="__PUBLIC__/js/jquery.min.js"></script>
</head>
<body style="background: #fff;">
	<div style="width:1000px;margin:auto;">
		<button id="button1" style="margin:20px 0;height: 50px;">批量审核出库单</button>
		<img src="__PUBLIC__/img/kuyou.jpg"  style="width:100%;" />
	</div>
	<script>
		var data = [];
		$("#button1").click(function(e) {
			$.post("{:U('Outstock/queryOutboundOrder')}",{},function(res){
				if(res.resultcode==0){
					data = res.result;
					auditingOrder();
				}
	    	},"json");
		});
		function auditingOrder(){
			if(data.length>0){
				$.get("{:U('Outstock/auditingOrder1')}",{osid:data[0].osid},function(res){
					if(res.resultcode==0){
						data.splice(0,1);
						auditingOrder();
						console.log("单据:"+data[0].osid+res.msg);
					}else{
						console.log("单据:"+data[0].osid+"审核失败,终止批量操作");
					}
		    	},"json");
			}else{
				console.log("批量执行完成");
			}
			
		}
	</script>
</body>
</html>